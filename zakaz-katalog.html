<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Оформление заказа</title>
    <link rel="stylesheet" href="zakaz-katalog.css">
</head>
<body>

<div class="skele">
    <form action="https://api.web3forms.com/submit" method="POST">

        <h1 id="product-title">Товар</h1>
        <p class="subtitle">Заполните форму — мы свяжемся с вами в течение 10 минут</p>

        <!-- Web3Forms -->
        <input type="hidden" name="access_key" value="87c687d6-5082-4a50-a0fe-c6801240e78f">

        <!-- ДАННЫЕ ТОВАРА -->
        <input type="hidden" name="Product" id="product-input">
        <input type="hidden" name="Size" id="size-input">
        <input type="hidden" name="Price" id="price-input">

        <h2>Ваши данные</h2>

        <!-- РАЗМЕР ОДЕЖДЫ -->
        <select id="clothes-size" name="Clothes_size" style="display:none;">
            <option value="">Выберите размер одежды</option>
            <option value="XS">XS</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="XXL">XXL</option>
            <option value="XXXL">XXXL</option>
        </select>

        <!-- РАЗМЕР ОБУВИ -->
        <input
            type="number"
            id="shoe-size"
            name="Shoe_size"
            placeholder="Размер обуви"
            style="display:none;"
            min="35"
            max="46"
        >

        <input type="text" name="Name" placeholder="Ваше имя" required>

        <!-- СПОСОБ СВЯЗИ -->
        <select id="contact-method" name="Contact_method" required>
            <option value="">Выберите способ связи</option>
            <option value="Telegram">Telegram</option>
            <option value="WhatsApp">WhatsApp</option>
            <option value="Instagram">Instagram</option>
            <option value="Email">Email</option>
            <option value="Discord">Discord</option>
        </select>

        <input
            type="text"
            id="contact-input"
            name="Contact_value"
            placeholder=""
            style="display:none;"
        >

        <input type="text" name="Country" placeholder="Ваша страна" required>

        <h2 style="margin-top:20px;">Оплата</h2>
        <input type="text" name="Payment" placeholder="Способ оплаты (банк)">

        <p class="subtitle" style="padding-top:20px;">
            Оплата идёт без учёта доставки
        </p>

        <button class="btn" type="submit">Отправить заявку</button>
    </form>
</div>

<script>
    const params = new URLSearchParams(window.location.search);

    const product = params.get('product');
    const size = params.get('size');
    const price = params.get('price');
    const type = params.get('type');

    // элементы
    const productTitle = document.getElementById('product-title');
    const productInput = document.getElementById('product-input');
    const sizeInput = document.getElementById('size-input');
    const priceInput = document.getElementById('price-input');

    const clothesSize = document.getElementById('clothes-size');
    const shoeSize = document.getElementById('shoe-size');

    // ===== ЗАПОЛНЕНИЕ =====
    if (product) {
        productTitle.textContent = product;
        productInput.value = product;
    }

    if (size) {
        sizeInput.value = size;
    }

    if (price) {
        priceInput.value = price + " ₸";
    }

    // ===== ЛОГИКА ТИПОВ (БЕЗ ГАДАНИЯ) =====
    clothesSize.style.display = "none";
    shoeSize.style.display = "none";
    clothesSize.required = false;
    shoeSize.required = false;

    if (type === "clothes") {
        clothesSize.style.display = "block";
        clothesSize.required = true;
        if (size) clothesSize.value = size;
    }

    if (type === "shoes") {
        shoeSize.style.display = "block";
        shoeSize.required = true;
        if (size) shoeSize.value = size;
    }

    // ===== СПОСОБ СВЯЗИ =====
    const contactSelect = document.getElementById('contact-method');
    const contactInput = document.getElementById('contact-input');

    contactSelect.addEventListener('change', () => {
        if (!contactSelect.value) {
            contactInput.style.display = 'none';
            contactInput.required = false;
        } else {
            contactInput.style.display = 'block';
            contactInput.placeholder = 'Введите ' + contactSelect.value;
            contactInput.required = true;
        }
    });

</script>

</body>
</html>
